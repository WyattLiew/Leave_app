(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{42:function(e,a,t){e.exports=t.p+"static/media/leave_guide.c117d2fa.png"},46:function(e,a,t){e.exports=t(71)},64:function(e,a,t){},71:function(e,a,t){"use strict";t.r(a);var n=t(1),l=t.n(n),s=t(19),r=t.n(s),i=t(10),o=t(11),c=t(13),d=t(12),m=t(14),h=t(43),u=t(24),v=t(3),g=t(72),p=t(73),E=t(74),f=t(75),y=t(76),_=t(77),b=t(78),C=t(79),w=t(100),k=t(80),L=t(81),S=t(82),O=function(e){function a(){var e;return Object(i.a)(this,a),(e=Object(c.a)(this,Object(d.a)(a).call(this))).getLogout=function(e){fetch("/logout").then(function(e){e.ok&&window&&(window.location.href="/")}).catch(function(e){return console.error(e)})},e.getUserStatus=function(a){fetch("/api/check_user_status").then(function(e){return e.json()}).then(function(a){return e.setState({userStatus:a.data},function(){e.loadingStatus()})}).catch(function(e){return console.error(e)})},e.state={isHidden:!0,isUser:!1,isAdmin:!1,isOpen:!1,userStatus:[]},e.toggle=e.toggle.bind(Object(v.a)(Object(v.a)(e))),e.handleLogout=e.handleLogout.bind(Object(v.a)(Object(v.a)(e))),e}return Object(m.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getUserStatus()}},{key:"handleLogout",value:function(){this.getLogout()}},{key:"loadingStatus",value:function(){var e=this;this.state.userStatus.map(function(a){return e.setState({isUser:a.isUser,isAdmin:a.isAdmin},function(){e.checkUserStatus(e.state.isUser,e.state.isAdmin)})})}},{key:"checkUserStatus",value:function(e,a){!a&&e?this.setState({isHidden:!1}):e&&a&&this.setState({isHidden:!0})}},{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(g.a,{style:{backgroundColor:"#262626"},dark:!0,expand:"sm",className:"mb-5"},l.a.createElement(p.a,null,l.a.createElement(E.a,{href:"#"},"Helios Distribution"),l.a.createElement(f.a,{onClick:this.toggle}),l.a.createElement(y.a,{isOpen:this.state.isOpen,navbar:!0},l.a.createElement(_.a,{className:"ml-auto",navbar:!0},l.a.createElement(b.a,null,l.a.createElement(C.a,{href:"/MainDashboard",style:{color:"white"},hidden:this.state.isHidden},"Dashboard")),l.a.createElement(b.a,null,l.a.createElement(C.a,{href:"/LeavePage",style:{color:"white"},hidden:this.state.isHidden},"Leaves")),l.a.createElement(w.a,{nav:!0,inNavbar:!0,hidden:this.state.isHidden},l.a.createElement(k.a,{nav:!0,caret:!0,style:{color:"white"}},"Profile"),l.a.createElement(L.a,null,l.a.createElement(S.a,{header:!0},"Personal"),l.a.createElement(S.a,{href:"/HistoryPage"},"History"),l.a.createElement(S.a,{divider:!0}),l.a.createElement(S.a,{onClick:this.handleLogout},"Signout"))),l.a.createElement(b.a,null,l.a.createElement(C.a,{href:"/",style:{color:"white"},hidden:!!this.state.isUser},"Login")),l.a.createElement(b.a,null,l.a.createElement(C.a,{href:"/",onClick:this.handleLogout,style:{color:"white"},hidden:!this.state.isAdmin},"Signout")))))))}}]),a}(n.Component),j=t(23),D=t.n(j),T=t(27),N=t(8),x=t(42),M=t.n(x),P=t(28),I=t(83),Y=t(84),B=t(85),A=t(86),V=t(87),R=t(41),q=t(88),U=t(89),H=t(90),z=t(91),J=function(e){function a(){var e;return Object(i.a)(this,a),(e=Object(c.a)(this,Object(d.a)(a).call(this))).getLeaveTakenHistory=function(a){e.state.indLeaves.map(function(a){return e.setState({reset_leave_type_code:a.leave_type_code,resetDaysCount:a.number_of_days},function(){e.getLeavesBalance(e.state.resetEmployeeID,e.state.reset_leave_type_code)})})},e.setLeaveBalance=function(a){e.state.individualLeavesBalance.map(function(a){return e.setState({resetBalanceID:a.leave_balance_id,resetTaken:a.leave_taken,resetRemaining:a.leave_remaining,resetEmployeeID:a.employee_id},function(){var a=Number(e.state.resetTaken),t=Number(e.state.resetRemaining),n=Number(e.state.resetDaysCount),l=e.state.reset_leave_type_code,s=a-n,r=t+n;7===l||3===l?e.setState({resetTaken:s,resetRemaining:0},function(){var a={employeeID:e.state.resetEmployeeID,balanceID:e.state.resetBalanceID,leaveType:e.state.reset_leave_type_code,days:e.state.resetDaysCount,currentDate:e.state.currentDate,taken:e.state.resetTaken,remaining:e.state.resetRemaining};fetch("/api/update_leaves_taken/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})}):e.setState({resetTaken:s,resetRemaining:r},function(){var a={employeeID:e.state.resetEmployeeID,balanceID:e.state.resetBalanceID,leaveType:e.state.reset_leave_type_code,days:e.state.resetDaysCount,currentDate:e.state.currentDate,taken:e.state.resetTaken,remaining:e.state.resetRemaining};fetch("/api/update_leaves_taken/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})})})})},e.getBalance=function(a){e.state.leavesBalance.map(function(a){return e.setState({name:a.employee_name,balanceID:a.leave_balance_id,balance:a.leave_balance,taken:a.leave_taken,remaining:a.leave_remaining},function(){})})},e.getAllLeaves=function(a){fetch("/api/get_all_leaves_taken").then(function(e){return e.json()}).then(function(a){return e.setState({leavesTaken:a.data})}).catch(function(e){return console.error(e)})},e.getLeaveByMonth=function(a){fetch("/api/get_all_leaves_taken_by_month/".concat(a)).then(function(e){return e.json()}).then(function(a){return e.setState({leavesTakenByMonth:a.data})}).catch(function(e){return console.error(e)})},e.getLoginStatus=function(e){fetch("/api/get_account_valification").then(function(e){e.ok&&window&&(window.location.href="/")}).catch(function(e){return console.error(e)})},e.getUserRoles=function(a){fetch("/api/check_user_management").then(function(e){return e.json()}).then(function(a){return e.setState({isManagement:a.data})}).catch(function(e){return console.error(e)})},e.getIndividualLeaves=function(a){fetch("/api/get_main_leaves_balance/".concat(a,"/",1)).then(function(e){return e.json()}).then(function(a){return e.setState({leavesBalance:a.data},function(){e.getBalance()})}).catch(function(e){return console.error(e)})},e.getUserId=function(a){fetch("/api/check_user_id").then(function(e){return e.json()}).then(function(a){return e.setState({id:a.data},function(){e.getIndividualLeaves(e.state.id)})}).catch(function(e){return console.error(e)})},e.getLeavesBalance=function(a,t){fetch("/api/get_leaves_balance/".concat(a,"/").concat(t)).then(function(e){return e.json()}).then(function(a){return e.setState({individualLeavesBalance:a.data},function(){e.setLeaveBalance()})}).catch(function(e){return console.error(e)})},e.getLeavesHistory=function(a){fetch("/api/get_leaves_taken_cancel/".concat(a)).then(function(e){return e.json()}).then(function(a){return e.setState({indLeaves:a.data},function(){e.getLeaveTakenHistory()})}).catch(function(e){return console.error(e)})},e.state={periodId:"",employeeName:"",fromDate:"",toDate:"",numberOfDays:"",takenByThisMonth:[],allOff:[],collapse1:!1,collapse2:!1,collapse3:!1,collapse4:!1,name:"",balanceID:"",balance:"",taken:"",remaining:"",leavesBalance:[],leavesTaken:[],leavesTakenByMonth:[],isManagement:!1,currentDate:new Date,selectedMonth:N(new Date).format("MM YYYY"),selectedYear:N(new Date).format("YYYY"),id:"",individualLeavesBalance:[],resetBalanceID:0,resetEmployeeID:0,resetRemaining:0,resetTaken:0,resetDaysCount:0,reset_leave_type_code:0},e.toggleMessage1=e.toggleMessage1.bind(Object(v.a)(Object(v.a)(e))),e.toggleMessage2=e.toggleMessage2.bind(Object(v.a)(Object(v.a)(e))),e.toggleMessage3=e.toggleMessage3.bind(Object(v.a)(Object(v.a)(e))),e.toggleMessage4=e.toggleMessage4.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeSelectedMonth=e.handleChangeSelectedMonth.bind(Object(v.a)(Object(v.a)(e))),e}return Object(m.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){window.history.pushState(null,null,window.location.href),window.onpopstate=function(){window.history.go(1)},this.getLoginStatus(),this.getUserRoles(),this.getUserId(),this.getAllLeaves(),this.getLeaveByMonth(this.state.selectedMonth)}},{key:"toggleMessage1",value:function(){this.setState(function(e){return{collapse1:!e.collapse1}})}},{key:"toggleMessage2",value:function(){this.setState(function(e){return{collapse2:!e.collapse2}})}},{key:"toggleMessage3",value:function(){this.setState(function(e){return{collapse3:!e.collapse3}})}},{key:"toggleMessage4",value:function(){this.setState(function(e){return{collapse4:!e.collapse4}})}},{key:"approveToggle",value:function(){var e=Object(T.a)(D.a.mark(function e(a,t){var n;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={employeeID:t,leavePeriodID:a,leaveApprovalCode:"2"},e.next=3,fetch("/api/update_leaves_taken_approval",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:return e.next=5,setTimeout(function(){return window.location.reload()},1500);case 5:case"end":return e.stop()}},e)}));return function(a,t){return e.apply(this,arguments)}}()},{key:"rejectToggle",value:function(){var e=Object(T.a)(D.a.mark(function e(a,t){var n;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={employeeID:t,leavePeriodID:a,leaveApprovalCode:"3"},e.next=3,this.setState({resetEmployeeID:t});case 3:return e.next=5,this.getLeavesHistory(a);case 5:return e.next=7,fetch("/api/update_leaves_taken_approval",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 7:return e.next=9,setTimeout(function(){return window.location.reload()},1500);case 9:case"end":return e.stop()}},e,this)}));return function(a,t){return e.apply(this,arguments)}}()},{key:"handleChangeSelectedMonth",value:function(e){var a=this;this.setState({selectedMonth:e.target.value},function(){return a.checkLeave()})}},{key:"checkLeave",value:function(){this.getLeaveByMonth(this.state.selectedMonth)}},{key:"render",value:function(){var e=this;return l.a.createElement(p.a,null,l.a.createElement(I.a,{style:{backgroundColor:"white"}},l.a.createElement("h2",{className:"display-4"},"Welcome Back, ",this.state.name," ",l.a.createElement(P.c,{className:"display-4"})),l.a.createElement("h5",null,N(this.state.currentDate).format("DD MMM, YYYY")),l.a.createElement("hr",{className:"my-2"}),l.a.createElement("h6",null,"Your annual leave balance :"),l.a.createElement("br",null),l.a.createElement(Y.a,null,l.a.createElement(B.a,{xs:"12",md:"4"}," ",l.a.createElement("h4",null,l.a.createElement(A.a,{color:"secondary"},this.state.balance)),"Total Leaves Accured"),l.a.createElement(B.a,{xs:"12",md:"4"},l.a.createElement("h4",null,l.a.createElement(A.a,{color:"secondary"},this.state.taken)),"Leaves Used"),l.a.createElement(B.a,{xs:"12",md:"4"},l.a.createElement("h4",null,l.a.createElement(A.a,{color:"secondary"},this.state.remaining)),"Leaves Remaining"))),l.a.createElement("div",{hidden:!this.state.isManagement},l.a.createElement(I.a,{style:{backgroundColor:"white"}},l.a.createElement("h2",null,"My Actions"),l.a.createElement("h6",null,"My leave approvals"),l.a.createElement("br",null),0!==this.state.leavesTaken.length?l.a.createElement(V.a,{className:"leave_table_main",responsive:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Leave Type"),l.a.createElement("th",null,"Dates"),l.a.createElement("th",null,"Days"),l.a.createElement("th",null,"Reason"),l.a.createElement("th",null,"Action"))),this.state.leavesTaken.map(function(a){return l.a.createElement("tbody",{key:a.leave_period_id,id:a.leave_period_id},l.a.createElement("tr",null,l.a.createElement("td",null,a.employee_name),l.a.createElement("td",null,a.leave_type),l.a.createElement("td",null,N(a.leave_from_date).format("DD")," - ",N(a.leave_to_date).format("DD MMM, YYYY")),l.a.createElement("td",null,a.number_of_days+" day(s)"),l.a.createElement("td",null,a.reason),l.a.createElement("td",null,l.a.createElement(Y.a,null,l.a.createElement(B.a,{xs:"6",md:"3"},l.a.createElement(R.a,{color:"dark",style:{color:"chartreuse"},size:"sm",id:a.leave_period_id,onClick:function(){window.confirm("Are you sure you want to approve the following leave?")&&e.approveToggle(a.leave_period_id,a.id)},hidden:1!==a.leave_approval_code},l.a.createElement(P.a,null))),l.a.createElement(B.a,{xs:"6",md:"3"},l.a.createElement(R.a,{color:"dark",style:{color:"red"},size:"sm",id:a.leave_period_id,onClick:function(){window.confirm("Are you sure you want to reject the following leave?")&&e.rejectToggle(a.leave_period_id,a.id)},hidden:1!==a.leave_approval_code},l.a.createElement(P.d,null)))))))})):l.a.createElement("h4",null,"No Record Found.."))),l.a.createElement(Y.a,null,l.a.createElement(B.a,{xs:"12",md:"7",sm:"7"},l.a.createElement(I.a,{style:{backgroundColor:"white"}},l.a.createElement("h4",{className:"display-5"},"Things you might not know ",l.a.createElement(P.b,null)),l.a.createElement("div",null,l.a.createElement(R.a,{color:"info",onClick:this.toggleMessage3,style:{marginBottom:"1rem",marginTop:"1rem"}},"How to apply leave?"),l.a.createElement(y.a,{isOpen:this.state.collapse3},l.a.createElement(q.a,{style:{marginBottom:"1rem"}},l.a.createElement(U.a,null,l.a.createElement("img",{style:{height:"350px",width:"100%"},src:M.a,alt:"guide"}),l.a.createElement("p",{className:"lead"},"Leave > New Leave Application > Apply"),l.a.createElement("p",{className:"lead"},l.a.createElement("strong",null,"3.")," Only select dates that you want to use leaves on and the date before your return to work."),l.a.createElement("p",{className:"lead"},l.a.createElement("strong",null,"4.")," Please calculate properly number of days you've applied, if holiday's dates or weekend are listed in a range you've applied. The ",l.a.createElement("strong",null,"Days Applied")," should adjust accordingly."),l.a.createElement("p",{className:"lead"},l.a.createElement("strong",null,"For Example:")," 17th - 18th(Friday and Saturday), Your working hours on Saturdays are 9am to 1pm. If you take leave on a Saturday, it is counted as a half day of leave. ",l.a.createElement("strong",null,"Days Applied")," should put 1.5 instead of 2."))))),l.a.createElement("div",null,l.a.createElement(R.a,{color:"info",onClick:this.toggleMessage4,style:{marginBottom:"1rem"}},"How to cancel leave?"),l.a.createElement(y.a,{isOpen:this.state.collapse4},l.a.createElement(q.a,{style:{marginBottom:"1rem"}},l.a.createElement(U.a,null,l.a.createElement("p",{className:"lead"},"Profile > History > Cancel"),l.a.createElement("p",{className:"lead"},"Once your request have been Approved, you cannot cancel your leave by yourself."))))),l.a.createElement("div",null,l.a.createElement(R.a,{color:"info",onClick:this.toggleMessage1,style:{marginBottom:"1rem"}},"Treatment of unused annual leave entitlement"),l.a.createElement(y.a,{isOpen:this.state.collapse1},l.a.createElement(q.a,{style:{marginBottom:"1rem"}},l.a.createElement(U.a,null,l.a.createElement("p",{className:"lead"},"You were entitled to x days of annual leave from January to December 2018. Only x days unused annual leave entitlement from January to December 2018 will be carried forward to 2019. If the unused annual leave entitlement from 2018 is not used by 31 December 2019, it can be forfeited."))))),l.a.createElement("div",null,l.a.createElement(R.a,{color:"info",onClick:this.toggleMessage2,style:{marginBottom:"1rem"}},"If annual leave is used up (unpaid leave)"),l.a.createElement(y.a,{isOpen:this.state.collapse2},l.a.createElement(q.a,{style:{marginBottom:"1rem"}},l.a.createElement(U.a,null,l.a.createElement("p",{className:"lead"},"You can apply for unpaid leave (also known as no-pay leave) if you are not eligible for paid annual leave or have used up your paid annual leave. Unpaid leave is subject to approval from your employer."),l.a.createElement("p",{className:"lead"},"If you take more paid annual leave than you are entitled to, the excess leave is treated as unpaid leave, and your employer can deduct your salary accordingly. Your employer should therefore keep a record of all your leave applications, whether paid or unpaid."))))))),l.a.createElement(B.a,{xs:"12",md:"5",sm:"5"},l.a.createElement(I.a,{style:{backgroundColor:"white"}},l.a.createElement("h2",null,"Who's off"),l.a.createElement(Y.a,null,l.a.createElement(B.a,{xs:"6",md:"6"},l.a.createElement("h6",null,N(this.state.currentDate).format("DD MMM, YYYY"))),l.a.createElement(H.a,null,l.a.createElement(z.a,{row:!0},l.a.createElement(B.a,{sm:8},l.a.createElement("select",{value:this.state.selectedMonth,name:"months",onChange:this.handleChangeSelectedMonth},l.a.createElement("option",{value:"00 ".concat(this.state.selectedYear)},"Select Month"),l.a.createElement("option",{value:"01 ".concat(this.state.selectedYear)},"January"),l.a.createElement("option",{value:"02 ".concat(this.state.selectedYear)},"February"),l.a.createElement("option",{value:"03 ".concat(this.state.selectedYear)},"March"),l.a.createElement("option",{value:"04 ".concat(this.state.selectedYear)},"April"),l.a.createElement("option",{value:"05 ".concat(this.state.selectedYear)},"May"),l.a.createElement("option",{value:"06 ".concat(this.state.selectedYear)},"June"),l.a.createElement("option",{value:"07 ".concat(this.state.selectedYear)},"July"),l.a.createElement("option",{value:"08 ".concat(this.state.selectedYear)},"August"),l.a.createElement("option",{value:"09 ".concat(this.state.selectedYear)},"September"),l.a.createElement("option",{value:"10 ".concat(this.state.selectedYear)},"October"),l.a.createElement("option",{value:"11 ".concat(this.state.selectedYear)},"November"),l.a.createElement("option",{value:"12 ".concat(this.state.selectedYear)},"December")))))),l.a.createElement("br",null),0!==this.state.leavesTakenByMonth.length?l.a.createElement(V.a,{className:"leave_table_main",responsive:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Dates"),l.a.createElement("th",null,"Days"))),this.state.leavesTakenByMonth.map(function(e){return l.a.createElement("tbody",{key:e.leave_period_id,id:e.leave_period_id},l.a.createElement("tr",null,l.a.createElement("td",null,e.employee_name),l.a.createElement("td",null,N(e.leave_from_date).format("DD MMM")," - ",N(e.leave_to_date).format("DD MMM, YYYY")),l.a.createElement("td",null,e.number_of_days+" day(s)")))})):l.a.createElement("h4",null,"No Record Found..")))))}}]),a}(n.Component),W=t(16),F=t.n(W),G=t(25),K=t(92),Q=t(99),X=t(93),Z=t(94),$=t(95),ee=t(96),ae=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(c.a)(this,Object(d.a)(a).call(this,e))).checkValidation=function(e,a){fetch("/account_validation_checking/".concat(e,"/").concat(a)).then(function(e){return e.json()}).then(function(e){return t.setState({validation:e.data},function(){t.getResetPassword()})}).catch(function(e){return console.error(e)})},t.checkUserId=function(e){fetch("/account_validation_checking_user_id/".concat(e)).then(function(e){return e.json()}).then(function(e){return t.setState({userId:e.data},function(){t.getUserId()})}).catch(function(e){return console.error(e)})},t.getLogout=function(e){fetch("/logout").then(function(e){e.ok&&window&&(window.location.href="/")}).catch(function(e){return console.error(e)})},t.state={modal:!1,showError:0,username:"",password:"",hiddenPinValid:!1,hiddenEmailBox:!1,hiddenPinBox:!1,hiddenPasswordBox:!1,showResetError:0,showPinError:0,showPasswordError:0,resetEmail:"",resetPin:"",resetUserId:"",userId:[],validation:[],resetPassword:"",resetPassword2:""},t.validator=new F.a,t.validator1=new F.a,t.validator2=new F.a,t.validator3=new F.a,t.handleSubmit=t.handleSubmit.bind(Object(v.a)(Object(v.a)(t))),t.handleChangeUsername=t.handleChangeUsername.bind(Object(v.a)(Object(v.a)(t))),t.handleChangePassword=t.handleChangePassword.bind(Object(v.a)(Object(v.a)(t))),t.forgetPasswordToggle=t.forgetPasswordToggle.bind(Object(v.a)(Object(v.a)(t))),t.handleChangeEmail=t.handleChangeEmail.bind(Object(v.a)(Object(v.a)(t))),t.handleSend=t.handleSend.bind(Object(v.a)(Object(v.a)(t))),t.handleChangePin=t.handleChangePin.bind(Object(v.a)(Object(v.a)(t))),t.handleChangeResetPassword=t.handleChangeResetPassword.bind(Object(v.a)(Object(v.a)(t))),t.handleChangeResetPassword2=t.handleChangeResetPassword2.bind(Object(v.a)(Object(v.a)(t))),t.handleSavePassword=t.handleSavePassword.bind(Object(v.a)(Object(v.a)(t))),t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){window.history.pushState(null,null,window.location.href),window.onpopstate=function(){window.history.go(1)}}},{key:"forgetPasswordToggle",value:function(){this.setState({hiddenPinValid:!1,hiddenEmailBox:!1,hiddenPinBox:!1,hiddenPasswordBox:!1,showResetError:0,showPinError:0,showPasswordError:0,resetEmail:"",resetPin:"",validation:[],resetPassword:"",resetPassword2:""}),this.setState(function(e){return{modal:!e.modal}})}},{key:"handleChangeEmail",value:function(e){this.setState({resetEmail:e.target.value})}},{key:"getUserId",value:function(){var e=this;this.state.userId.map(function(a){return e.setState({resetUserId:a.id})})}},{key:"handleSend",value:function(e){if(this.setState({showResetError:1}),this.validator1.allValid()){this.setState({hiddenEmailBox:!0,hiddenPinBox:!0});var a={email:this.state.resetEmail};fetch("/send-resetPassword",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),this.checkUserId(this.state.resetEmail)}else e.preventDefault(),this.validator1.showMessages(),this.forceUpdate()}},{key:"handleChangePin",value:function(e){var a=this;this.setState({resetPin:e.target.value},function(){a.setState({showPinError:1}),a.validator2.allValid()?a.checkValidation(a.state.resetEmail,a.state.resetPin):(a.validator2.showMessages(),a.forceUpdate())})}},{key:"getResetPassword",value:function(){0!==this.state.validation.length?this.setState({hiddenPasswordBox:!0,hiddenPinBox:!1,hiddenPinValid:!1}):this.setState({hiddenPinValid:!0})}},{key:"handleChangeResetPassword",value:function(e){this.setState({resetPassword:e.target.value})}},{key:"handleChangeResetPassword2",value:function(e){this.setState({resetPassword2:e.target.value})}},{key:"handleSavePassword",value:function(e){if(this.setState({showPasswordError:1}),this.validator3.allValid())if(this.state.resetPassword===this.state.resetPassword2){var a={resetUserId:this.state.resetUserId,resetPassword:this.state.resetPassword,resetPassword2:this.state.resetPassword2};fetch("/reset_password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),alert("Your password has been reset successfully!"),window.location="/"}else alert("password doesn't match");else this.validator3.showMessages(),this.forceUpdate()}},{key:"handleChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handleChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(e){this.setState({showError:1}),this.validator.allValid()||(e.preventDefault(),this.validator.showMessages(),this.forceUpdate())}},{key:"render",value:function(){return l.a.createElement("div",{className:"login"},l.a.createElement(p.a,null,l.a.createElement("div",null,l.a.createElement(H.a,{className:"box",method:"POST",action:"/login",onSubmit:this.handleSubmit},l.a.createElement("h1",null,"Login"),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement("p",null,this.validator.message("username",this.state.username,"required|email"))),l.a.createElement(z.a,null,l.a.createElement(K.a,{type:"email",name:"username",placeholder:"Your Email address",onChange:this.handleChangeUsername})),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement("p",null,this.validator.message("password",this.state.password,"required|min:6"))),l.a.createElement(z.a,null,l.a.createElement(K.a,{type:"password",name:"password",placeholder:"********",onChange:this.handleChangePassword,autoComplete:"off"})),l.a.createElement(K.a,{type:"submit",value:"Login"}),l.a.createElement(R.a,{color:"link",onClick:this.forgetPasswordToggle},"Forget password?"))),l.a.createElement(Q.a,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className},l.a.createElement(H.a,null,l.a.createElement(X.a,{toggle:this.toggle,charCode:"Y"},"Password Reset Request"),l.a.createElement(Z.a,null,l.a.createElement("div",{hidden:!!this.state.hiddenEmailBox},l.a.createElement("h6",null,"Please enter your email address below to start the process of resetting your password."),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showResetError},l.a.createElement("p",{className:"warning_text_login"},this.validator1.message("email",this.state.resetEmail,"required|email"))),l.a.createElement(z.a,{row:!0},l.a.createElement(B.a,{sm:"8"},l.a.createElement(K.a,{type:"email",name:"email",placeholder:"Email Address",onChange:this.handleChangeEmail}),"  "),l.a.createElement(B.a,{sm:"4"},l.a.createElement(R.a,{color:"primary",className:"btn-primary",onClick:this.handleSend},"Send")," "))),l.a.createElement("div",{hidden:!this.state.hiddenPinBox},l.a.createElement("p",null,this.state.resetEmail," ",l.a.createElement(G.a,null)),l.a.createElement("h6",null,"A 4 digit PIN has been sent to your email."),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showPinError},l.a.createElement("p",{className:"warning_text_login"},this.validator2.message("pin",this.state.resetPin,"required|min:4|max:4"))),l.a.createElement(z.a,null,l.a.createElement("p",{className:"warning_text_login",hidden:!this.state.hiddenPinValid},"Invalid Pin")),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"reason",sm:"2"},"Pin"),l.a.createElement(B.a,{sm:"6"},l.a.createElement(K.a,{type:"number",name:"pin",placeholder:"4 Digit Pin",onChange:this.handleChangePin}),"  ")),l.a.createElement("h6",null,"If you cannot find your reset password email, please check your spam/junk folder, or resend the reset email.")),l.a.createElement("div",{hidden:!this.state.hiddenPasswordBox},l.a.createElement("p",null,this.state.resetEmail),l.a.createElement("h6",null,"Please reset your new password."),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showPasswordError},l.a.createElement("p",{className:"warning_text_login"},this.validator3.message("resetPassword",this.state.resetPassword,"required|min:6")),l.a.createElement("p",{className:"warning_text_login"},this.validator3.message("resetPassword2",this.state.resetPassword2,"required|min:6"))),l.a.createElement(z.a,{row:!0},l.a.createElement(B.a,{sm:6},l.a.createElement(K.a,{type:"password",name:"resetPassword",placeholder:"New Password",onChange:this.handleChangeResetPassword,autoComplete:"off"})),l.a.createElement(B.a,{sm:6},l.a.createElement(K.a,{type:"password",name:"resetPassword2",placeholder:"Confirm Password",onChange:this.handleChangeResetPassword2,autoComplete:"off"}))),l.a.createElement(R.a,{color:"primary",className:"btn-primary",onClick:this.handleSavePassword},"Reset Password")),l.a.createElement(K.a,{type:"text",name:"resetUserId",value:this.state.resetUserId,readOnly:!0,hidden:!0})),l.a.createElement(ee.a,null,l.a.createElement(R.a,{color:"secondary",onClick:this.forgetPasswordToggle},"Cancel"))))))}}]),a}(n.Component),te=t(20),ne=t(97),le=t(98),se=function(e){function a(){var e;return Object(i.a)(this,a),(e=Object(c.a)(this,Object(d.a)(a).call(this))).handleChangeCheckAdmin=function(){e.setState({editIsAdmin:!e.state.editIsAdmin})},e.handleChangeCheckManagement=function(){e.setState({editIsManagement:!e.state.editIsManagement})},e.getIndividualDetials=function(a){e.state.individualEmployee.map(function(a){return e.setState({editId:a.id,editName:a.employee_name.split(" ").join(""),editEmail:a.employee_email,editMobile:a.employee_mobile,editDepartment:a.employee_dept,editDateJoined:a.employee_date_hired,editIsAdmin:a.isadmin,editIsManagement:a.ismanagement})})},e.getEmployee=function(a){fetch("/api/get_all_employee").then(function(e){return e.json()}).then(function(a){return e.setState({employee:a.data})}).catch(function(e){return console.error(e)})},e.getIndividualEmployee=function(a){fetch("/api/get_individual_employee/".concat(a)).then(function(e){return e.json()}).then(function(a){return e.setState({individualEmployee:a.data},function(){e.getIndividualDetials()})}).catch(function(e){return console.error(e)})},e.state={showError:0,modal:!1,employee:[],individualEmployee:[],editId:"",editName:"",editEmail:"",editMobile:"",editDepartment:"",editDateJoined:null,editIsAdmin:"",editIsManagement:""},e.validator=new F.a,e.editToggle=e.editToggle.bind(Object(v.a)(Object(v.a)(e))),e.cancelToggle=e.cancelToggle.bind(Object(v.a)(Object(v.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeDepartment=e.handleChangeDepartment.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeCheckAdmin=e.handleChangeCheckAdmin.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeCheckManagement=e.handleChangeCheckManagement.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeName=e.handleChangeName.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeEmail=e.handleChangeEmail.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeMobile=e.handleChangeMobile.bind(Object(v.a)(Object(v.a)(e))),e}return Object(m.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getEmployee()}},{key:"editToggle",value:function(){this.setState({showError:0,editName:"",editEmail:"",editMobile:"",editDepartment:"",editDateJoined:"",editIsAdmin:null,editIsManagement:null}),this.setState(function(e){return{modal:!e.modal}})}},{key:"handleChangeName",value:function(e){this.setState({editName:e.target.value})}},{key:"handleChangeEmail",value:function(e){this.setState({editEmail:e.target.value})}},{key:"handleChangeMobile",value:function(e){this.setState({editMobile:e.target.value})}},{key:"handleChangeDepartment",value:function(e){this.setState({editDepartment:e.target.value.toUpperCase()})}},{key:"handleSubmit",value:function(e){if(this.setState({showError:1}),this.validator.allValid()){var a={id:this.state.editId,name:this.state.editName,email:this.state.editEmail,mobile:this.state.editMobile,department:this.state.editDepartment,isAdmin:this.state.editIsAdmin,isManagement:this.state.editIsManagement};fetch("/modified_employee_details",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),alert("You submitted the form and stuff!")}else e.preventDefault(),this.validator.showMessages(),alert("Please check your details."),this.forceUpdate()}},{key:"cancelToggle",value:function(e){fetch("/api/delete_individual_employee_data/".concat(e),{method:"DELETE"}),window.location.reload()}},{key:"getDetails",value:function(e){this.getIndividualEmployee(e)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(V.a,{className:"leave_table",responsive:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Employee Id"),l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Email"),l.a.createElement("th",null,"Mobile"),l.a.createElement("th",null,"Department"),l.a.createElement("th",null,"Date Hired"),l.a.createElement("th",null,"Role"),l.a.createElement("th",null,"Position"),l.a.createElement("th",null,"Actions"))),this.state.employee.map(function(a){return l.a.createElement("tbody",{key:a.id,id:a.id},l.a.createElement("tr",null,l.a.createElement("td",null,a.id),l.a.createElement("td",null,a.employee_name),l.a.createElement("td",null,a.employee_email),l.a.createElement("td",null,a.employee_mobile),l.a.createElement("td",null,a.employee_dept),l.a.createElement("td",null,N(a.employee_date_hired).format("LL")),l.a.createElement("td",null,a.isadmin?"Admin":"User"),l.a.createElement("td",null,a.ismanagement?"Management":"Employee"),l.a.createElement("td",null,l.a.createElement(Y.a,null,l.a.createElement(B.a,null,l.a.createElement(R.a,{color:"link",style:{color:"#3498db"},id:a.id,onClick:function(){e.editToggle(e.getDetails(a.id))}},l.a.createElement(te.c,{style:{fontSize:"x-large"}}))),l.a.createElement(B.a,null,l.a.createElement(R.a,{color:"link",style:{color:"red"},id:a.id,onClick:function(){window.confirm("Delete this employee?")&&e.cancelToggle(a.id)}},l.a.createElement(G.b,{style:{fontSize:"x-large"}})))))))})),l.a.createElement(Q.a,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className},l.a.createElement(H.a,{onSubmit:this.handleSubmit},l.a.createElement(X.a,{toggle:this.toggle,charCode:"Y"},"Edit"),l.a.createElement(Z.a,null,l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement($.a,{for:"name",sm:4}),l.a.createElement(B.a,{className:"warning_text",sm:8},this.validator.message("name",this.state.editName,"required|alpha"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"name",sm:4},"Name"),l.a.createElement(B.a,{sm:8},l.a.createElement(K.a,{type:"text",name:"name",placeholder:"Name",onChange:this.handleChangeName,defaultValue:this.state.editName}))),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement($.a,{for:"email",sm:4}),l.a.createElement(B.a,{className:"warning_text",sm:8},this.validator.message("email",this.state.editEmail,"required|email"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"email",sm:4},"Email"),l.a.createElement(B.a,{sm:8},l.a.createElement(K.a,{type:"email",name:"email",placeholder:"Email",onChange:this.handleChangeEmail,defaultValue:this.state.editEmail}))),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement($.a,{for:"mobile",sm:4}),l.a.createElement(B.a,{className:"warning_text",sm:8},this.validator.message("mobile",this.state.editMobile,"required|phone"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"mobile",sm:4},"Mobile"),l.a.createElement(B.a,{sm:8},l.a.createElement(K.a,{type:"number",name:"mobile",placeholder:"Contact number",onChange:this.handleChangeMobile,defaultValue:this.state.editMobile}))),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement($.a,{for:"department",sm:4}),l.a.createElement(B.a,{className:"warning_text",sm:8},this.validator.message("department",this.state.editDepartment,"required|alpha"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"department",sm:4},"Department"),l.a.createElement(B.a,{sm:8},l.a.createElement(K.a,{type:"text",name:"department",placeholder:"Department ..",onChange:this.handleChangeDepartment,defaultValue:this.state.editDepartment}))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"dateJoined",sm:4},"Date Joined"),l.a.createElement(B.a,{sm:8},l.a.createElement(K.a,{type:"date",name:"dateHired",id:"dateJoined",value:N(this.state.editDateJoined).format("YYYY-MM-DD"),readOnly:!0}))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"isAdmin",sm:4}),l.a.createElement(B.a,{sm:{size:8}},l.a.createElement(z.a,{check:!0},l.a.createElement($.a,{check:!0},l.a.createElement(K.a,{type:"checkbox",id:"isAdmin",checked:this.state.editIsAdmin||"",onChange:this.handleChangeCheckAdmin})," ","Is Admin?")))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"isManagement",sm:4}),l.a.createElement(B.a,{sm:{size:8}},l.a.createElement(z.a,{check:!0},l.a.createElement($.a,{check:!0},l.a.createElement(K.a,{type:"checkbox",id:"isManagement",checked:this.state.editIsManagement||"",onChange:this.handleChangeCheckManagement})," ","Is Management?")))),l.a.createElement(K.a,{type:"text",name:"id",value:this.state.id,readOnly:!0,hidden:!0})),l.a.createElement(ee.a,null,l.a.createElement(K.a,{type:"submit",className:"btn btn-primary",value:"Save"})," ",l.a.createElement(R.a,{color:"secondary",onClick:this.editToggle},"Cancel")))))}}]),a}(n.Component),re=function(e){function a(){var e;return Object(i.a)(this,a),(e=Object(c.a)(this,Object(d.a)(a).call(this))).getIndividualDetials=function(a){e.state.individualEmployee.map(function(a){return e.setState({editId:a.id,editName:a.employee_name.split(" ").join("")})})},e.getBalance=function(a){e.state.individualEmployeeLeaveBalance.map(function(a){return e.setState({balanceID:a.leave_balance_id,balance:a.leave_balance,taken:a.leave_taken,remaining:a.leave_remaining,leaveType:a.leave_type},function(){})})},e.getEmployee=function(a){fetch("/api/get_all_employee").then(function(e){return e.json()}).then(function(a){return e.setState({employee:a.data})}).catch(function(e){return console.error(e)})},e.getIndividualEmployee=function(a){fetch("/api/get_individual_employee/".concat(a)).then(function(e){return e.json()}).then(function(a){return e.setState({individualEmployee:a.data},function(){e.getIndividualDetials()})}).catch(function(e){return console.error(e)})},e.getIndividualEmployeeLeaveDetails=function(a){fetch("/api/get_employee_all_leaves_balance/".concat(a)).then(function(e){return e.json()}).then(function(t){return e.setState({individualEmployeeLeaveDetails:t.data},function(){e.getIndividualEmployee(a)})}).catch(function(e){return console.error(e)})},e.getIndividualEmployeeLeaveBalance=function(a,t){fetch("/api/get_individual_employee_leave_balance/".concat(a,"/").concat(t)).then(function(e){return e.json()}).then(function(a){return e.setState({individualEmployeeLeaveBalance:a.data},function(){e.getBalance()})}).catch(function(e){return console.error(e)})},e.state={showError:0,modalLeave:!1,modalEdit:!1,employee:[],individualEmployee:[],editId:"",editName:"",updatedDate:new Date,individualEmployeeLeaveDetails:[],leave1_1:"",leave1_2:"",leave1_3:"",leave2_1:"",leave2_2:"",leave2_3:"",leave3_1:"",leave3_2:"",leave3_3:"",leave4_1:"",leave4_2:"",leave4_3:"",leave5_1:"",leave5_2:"",leave5_3:"",leave6_1:"",leave6_2:"",leave6_3:"",leave7_1:"",leave7_2:"",leave7_3:"",leave8_1:"",leave8_2:"",leave8_3:"",leave9_1:"",leave9_2:"",leave9_3:"",leave10_1:"",leave10_2:"",leave10_3:"",individualEmployeeLeaveBalance:[],editLeave1_1:"",editLeave1_2:"",editLeave1_3:"",leaveTypeValue:0,balanceID:"",leaveType:"",balance:"",taken:"",remaining:""},e.validator=new F.a,e.editLeaveToggle=e.editLeaveToggle.bind(Object(v.a)(Object(v.a)(e))),e.leaveToggle=e.leaveToggle.bind(Object(v.a)(Object(v.a)(e))),e.handleSubmitNewLeave=e.handleSubmitNewLeave.bind(Object(v.a)(Object(v.a)(e))),e.handleSubmitEditLeave=e.handleSubmitEditLeave.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeaveType=e.handleChangeLeaveType.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave1_1=e.handleChangeLeave1_1.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave1_2=e.handleChangeLeave1_2.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave1_3=e.handleChangeLeave1_3.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave2_1=e.handleChangeLeave2_1.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave2_2=e.handleChangeLeave2_2.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave2_3=e.handleChangeLeave2_3.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave3_1=e.handleChangeLeave3_1.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave3_2=e.handleChangeLeave3_2.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave3_3=e.handleChangeLeave3_3.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave4_1=e.handleChangeLeave4_1.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave4_2=e.handleChangeLeave4_2.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave4_3=e.handleChangeLeave4_3.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave5_1=e.handleChangeLeave5_1.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave5_2=e.handleChangeLeave5_2.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave5_3=e.handleChangeLeave5_3.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave6_1=e.handleChangeLeave6_1.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave6_2=e.handleChangeLeave6_2.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave6_3=e.handleChangeLeave6_3.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave7_1=e.handleChangeLeave7_1.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave7_2=e.handleChangeLeave7_2.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave7_3=e.handleChangeLeave7_3.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave8_1=e.handleChangeLeave8_1.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave8_2=e.handleChangeLeave8_2.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave8_3=e.handleChangeLeave8_3.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave9_1=e.handleChangeLeave9_1.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave9_2=e.handleChangeLeave9_2.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave9_3=e.handleChangeLeave9_3.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave10_1=e.handleChangeLeave10_1.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave10_2=e.handleChangeLeave10_2.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeLeave10_3=e.handleChangeLeave10_3.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeEditLeave1_1=e.handleChangeEditLeave1_1.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeEditLeave1_2=e.handleChangeEditLeave1_2.bind(Object(v.a)(Object(v.a)(e))),e.handleChangeEditLeave1_3=e.handleChangeEditLeave1_3.bind(Object(v.a)(Object(v.a)(e))),e}return Object(m.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getEmployee()}},{key:"editLeaveToggle",value:function(){this.setState({showError:0,leaveTypeValue:0,balanceID:"",leaveType:"",balance:"",taken:"",remaining:"",editLeave1_1:"",editLeave1_2:"",editLeave1_3:""}),this.setState(function(e){return{modalEdit:!e.modalEdit}})}},{key:"leaveToggle",value:function(){this.setState({showError:0,leave1_1:"",leave1_2:"",leave1_3:"",leave2_1:"",leave2_2:"",leave2_3:"",leave3_1:"",leave3_2:"",leave3_3:"",leave4_1:"",leave4_2:"",leave4_3:"",leave5_1:"",leave5_2:"",leave5_3:"",leave6_1:"",leave6_2:"",leave6_3:"",leave7_1:"",leave7_2:"",leave7_3:"",leave8_1:"",leave8_2:"",leave8_3:"",leave9_1:"",leave9_2:"",leave9_3:"",leave10_1:"",leave10_2:"",leave10_3:""}),this.setState(function(e){return{modalLeave:!e.modalLeave}})}},{key:"handleChangeLeave1_1",value:function(e){this.setState({leave1_1:e.target.value})}},{key:"handleChangeLeave1_2",value:function(e){this.setState({leave1_2:e.target.value})}},{key:"handleChangeLeave1_3",value:function(e){this.setState({leave1_3:e.target.value})}},{key:"handleChangeLeave2_1",value:function(e){this.setState({leave2_1:e.target.value})}},{key:"handleChangeLeave2_2",value:function(e){this.setState({leave2_2:e.target.value})}},{key:"handleChangeLeave2_3",value:function(e){this.setState({leave2_3:e.target.value})}},{key:"handleChangeLeave3_1",value:function(e){this.setState({leave3_1:e.target.value})}},{key:"handleChangeLeave3_2",value:function(e){this.setState({leave3_2:e.target.value})}},{key:"handleChangeLeave3_3",value:function(e){this.setState({leave3_3:e.target.value})}},{key:"handleChangeLeave4_1",value:function(e){this.setState({leave4_1:e.target.value})}},{key:"handleChangeLeave4_2",value:function(e){this.setState({leave4_2:e.target.value})}},{key:"handleChangeLeave4_3",value:function(e){this.setState({leave4_3:e.target.value})}},{key:"handleChangeLeave5_1",value:function(e){this.setState({leave5_1:e.target.value})}},{key:"handleChangeLeave5_2",value:function(e){this.setState({leave5_2:e.target.value})}},{key:"handleChangeLeave5_3",value:function(e){this.setState({leave5_3:e.target.value})}},{key:"handleChangeLeave6_1",value:function(e){this.setState({leave6_1:e.target.value})}},{key:"handleChangeLeave6_2",value:function(e){this.setState({leave6_2:e.target.value})}},{key:"handleChangeLeave6_3",value:function(e){this.setState({leave6_3:e.target.value})}},{key:"handleChangeLeave7_1",value:function(e){this.setState({leave7_1:e.target.value})}},{key:"handleChangeLeave7_2",value:function(e){this.setState({leave7_2:e.target.value})}},{key:"handleChangeLeave7_3",value:function(e){this.setState({leave7_3:e.target.value})}},{key:"handleChangeLeave8_1",value:function(e){this.setState({leave8_1:e.target.value})}},{key:"handleChangeLeave8_2",value:function(e){this.setState({leave8_2:e.target.value})}},{key:"handleChangeLeave8_3",value:function(e){this.setState({leave8_3:e.target.value})}},{key:"handleChangeLeave9_1",value:function(e){this.setState({leave9_1:e.target.value})}},{key:"handleChangeLeave9_2",value:function(e){this.setState({leave9_2:e.target.value})}},{key:"handleChangeLeave9_3",value:function(e){this.setState({leave9_3:e.target.value})}},{key:"handleChangeLeave10_1",value:function(e){this.setState({leave10_1:e.target.value})}},{key:"handleChangeLeave10_2",value:function(e){this.setState({leave10_2:e.target.value})}},{key:"handleChangeLeave10_3",value:function(e){this.setState({leave10_3:e.target.value})}},{key:"handleSubmitNewLeave",value:function(e){if(this.setState({showError:1}),this.validator.allValid()){var a={id:this.state.editId,year:N(this.state.updatedDate).format("YYYY"),updatedDate:N(this.state.updatedDate).format("LL"),leave1_1:this.state.leave1_1,leave1_2:this.state.leave1_2,leave1_3:this.state.leave1_3,leave2_1:this.state.leave2_1,leave2_2:this.state.leave2_2,leave2_3:this.state.leave2_3,leave3_1:this.state.leave3_1,leave3_2:this.state.leave3_2,leave3_3:this.state.leave3_3,leave4_1:this.state.leave4_1,leave4_2:this.state.leave4_2,leave4_3:this.state.leave4_3,leave5_1:this.state.leave5_1,leave5_2:this.state.leave5_2,leave5_3:this.state.leave5_3,leave6_1:this.state.leave6_1,leave6_2:this.state.leave6_2,leave6_3:this.state.leave6_3,leave7_1:this.state.leave7_1,leave7_2:this.state.leave7_2,leave7_3:this.state.leave7_3,leave8_1:this.state.leave8_1,leave8_2:this.state.leave8_2,leave8_3:this.state.leave8_3,leave9_1:this.state.leave9_1,leave9_2:this.state.leave9_2,leave9_3:this.state.leave9_3,leave10_1:this.state.leave10_1,leave10_2:this.state.leave10_2,leave10_3:this.state.leave10_3};fetch("/update_employee_new_details",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),alert("You submitted the form and stuff!")}else e.preventDefault(),this.validator.showMessages(),alert("Please check your details."),this.forceUpdate()}},{key:"handleChangeEditLeave1_1",value:function(e){this.setState({balance:e.target.value})}},{key:"handleChangeEditLeave1_2",value:function(e){this.setState({taken:e.target.value})}},{key:"handleChangeEditLeave1_3",value:function(e){this.setState({remaining:e.target.value})}},{key:"handleChangeLeaveType",value:function(e){var a=this;this.setState({leaveTypeValue:e.target.value,balanceID:"",leaveTypr:"",balance:"",taken:"",remaining:""},function(){return a.getIndividualEmployeeLeaveBalance(a.state.editId,a.state.leaveTypeValue)})}},{key:"handleSubmitEditLeave",value:function(e){if(this.setState({showError:1}),this.validator.allValid()){e.preventDefault();var a={id:this.state.editId,year:N(this.state.updatedDate).format("YYYY"),updatedDate:N(this.state.updatedDate).format("LL"),balanceID:this.state.balanceID,editLeave1_1:this.state.balance,editLeave1_2:this.state.taken,editLeave1_3:this.state.remaining};fetch("/update_employee_exsiting_leave_balance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),alert("Updated successfully!"),this.editLeaveToggle()}else e.preventDefault(),this.validator.showMessages(),alert("Please check your details."),this.forceUpdate()}},{key:"getDetails",value:function(e){this.getIndividualEmployee(e)}},{key:"getLeaveDetails",value:function(e){this.getIndividualEmployeeLeaveDetails(e)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(V.a,{className:"leave_table",responsive:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Employee Id"),l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Leaves"),l.a.createElement("th",null,"Actions"))),this.state.employee.map(function(a){return l.a.createElement("tbody",{key:a.id,id:a.id},l.a.createElement("tr",null,l.a.createElement("td",null,a.id),l.a.createElement("td",null,a.employee_name),l.a.createElement("td",null,l.a.createElement(R.a,{color:"link",style:{color:"lime"},id:a.id,onClick:function(){e.leaveToggle(e.getLeaveDetails(a.id))},hidden:!!a.isadmin},l.a.createElement(te.b,{style:{fontSize:"x-large"}}))),l.a.createElement("td",null,l.a.createElement(Y.a,null,l.a.createElement(B.a,null,l.a.createElement(R.a,{color:"link",style:{color:"#3498db"},id:a.id,onClick:function(){e.editLeaveToggle(e.getDetails(a.id))},hidden:!!a.isadmin},l.a.createElement(te.c,{style:{fontSize:"x-large"}})))))))})),l.a.createElement(Q.a,{isOpen:this.state.modalLeave,toggle:this.toggle,className:this.props.className},0===this.state.individualEmployeeLeaveDetails.length?l.a.createElement(H.a,{onSubmit:this.handleSubmitNewLeave},l.a.createElement(X.a,{toggle:this.toggle},"New User"),l.a.createElement(Z.a,null,l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"leave1_1",sm:4},"Annual Leave"),l.a.createElement(B.a,{sm:8}),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave1_1",placeholder:"Balance",onChange:this.handleChangeLeave1_1,defaultValue:this.state.leave1_1}),"   "),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave1_2",placeholder:"Taken",onChange:this.handleChangeLeave1_2,defaultValue:this.state.leave1_2}),"   "),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave1_3",placeholder:"Remaining",onChange:this.handleChangeLeave1_3,defaultValue:this.state.leave1_3}),"   ")),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Balance",this.state.leave1_1,"required|integer")),l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Taken",this.state.leave1_2,"required|integer")),l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Remaining",this.state.leave1_3,"required|integer"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"leave2_1",sm:4},"Childcare Leave"),l.a.createElement(B.a,{sm:8}),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave2_1",placeholder:"Balance",onChange:this.handleChangeLeave2_1,defaultValue:this.state.leave2_1}),"   "),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave2_2",placeholder:"Taken",onChange:this.handleChangeLeave2_2,defaultValue:this.state.leave2_2}),"   "),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave2_3",placeholder:"Remaining",onChange:this.handleChangeLeave2_3,defaultValue:this.state.leave2_3}),"   ")),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Balance",this.state.leave1_1,"required|integer")),l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Taken",this.state.leave1_2,"required|integer")),l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Remaining",this.state.leave1_3,"required|integer"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"leave3_1",sm:4},"National Service"),l.a.createElement(B.a,{sm:8}),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave3_1",placeholder:"Balance",onChange:this.handleChangeLeave3_1,defaultValue:this.state.leave3_1}),"   "),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave3_2",placeholder:"Taken",onChange:this.handleChangeLeave3_2,defaultValue:this.state.leave3_2}),"   "),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave3_3",placeholder:"Remaining",onChange:this.handleChangeLeave3_3,defaultValue:this.state.leave3_3}),"   ")),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Balance",this.state.leave3_1,"required|integer")),l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Taken",this.state.leave3_2,"required|integer")),l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Remaining",this.state.leave3_3,"required|integer"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"leave4_1",sm:4},"Off In Lieu"),l.a.createElement(B.a,{sm:8}),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave4_1",placeholder:"Balance",onChange:this.handleChangeLeave4_1,defaultValue:this.state.leave4_1}),"   "),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave4_2",placeholder:"Taken",onChange:this.handleChangeLeave4_2,defaultValue:this.state.leave4_2}),"   "),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave4_3",placeholder:"Remaining",onChange:this.handleChangeLeave4_3,defaultValue:this.state.leave4_3}),"   ")),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Balance",this.state.leave4_1,"required|integer")),l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Taken",this.state.leave4_2,"required|integer")),l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Remaining",this.state.leave4_3,"required|integer"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"leave5_1",sm:4},"Medical Leave"),l.a.createElement(B.a,{sm:8}),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave5_1",placeholder:"Balance",onChange:this.handleChangeLeave5_1,defaultValue:this.state.leave5_1}),"   "),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave5_2",placeholder:"Taken",onChange:this.handleChangeLeave5_2,defaultValue:this.state.leave5_2}),"   "),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave5_3",placeholder:"Remaining",onChange:this.handleChangeLeave5_3,defaultValue:this.state.leave5_3}),"   ")),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Balance",this.state.leave5_1,"required|integer")),l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Taken",this.state.leave5_2,"required|integer")),l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Remaining",this.state.leave5_3,"required|integer"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"leave6_1",sm:4},"Hospitalisation Leave"),l.a.createElement(B.a,{sm:8}),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave6_1",placeholder:"Balance",onChange:this.handleChangeLeave6_1,defaultValue:this.state.leave6_1}),"   "),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave6_2",placeholder:"Taken",onChange:this.handleChangeLeave6_2,defaultValue:this.state.leave6_2}),"   "),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave6_3",placeholder:"Remaining",onChange:this.handleChangeLeave6_3,defaultValue:this.state.leave6_3}),"   ")),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Balance",this.state.leave6_1,"required|integer")),l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Taken",this.state.leave6_2,"required|integer")),l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Remaining",this.state.leave6_3,"required|integer"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"leave7_1",sm:4},"Unpaid Leave"),l.a.createElement(B.a,{sm:8}),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave7_1",placeholder:"Balance",onChange:this.handleChangeLeave7_1,defaultValue:this.state.leave7_1}),"   "),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave7_2",placeholder:"Taken",onChange:this.handleChangeLeave7_2,defaultValue:this.state.leave7_2}),"   "),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave7_3",placeholder:"Remaining",onChange:this.handleChangeLeave7_3,defaultValue:this.state.leave7_3}),"   ")),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Balance",this.state.leave7_1,"required|integer")),l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Taken",this.state.leave7_2,"required|integer")),l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Remaining",this.state.leave7_3,"required|integer"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"leave8_1",sm:4},"Maternity Leave"),l.a.createElement(B.a,{sm:8}),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave8_1",placeholder:"Balance",onChange:this.handleChangeLeave8_1,defaultValue:this.state.leave8_1}),"   "),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave8_2",placeholder:"Taken",onChange:this.handleChangeLeave8_2,defaultValue:this.state.leave8_2}),"   "),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave8_3",placeholder:"Remaining",onChange:this.handleChangeLeave8_3,defaultValue:this.state.leave8_3}),"   ")),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Balance",this.state.leave8_1,"required|integer")),l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Taken",this.state.leave8_2,"required|integer")),l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Remaining",this.state.leave8_3,"required|integer"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"leave9_1",sm:4},"Parental Leave"),l.a.createElement(B.a,{sm:8}),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave9_1",placeholder:"Balance",onChange:this.handleChangeLeave9_1,defaultValue:this.state.leave9_1}),"   "),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave9_2",placeholder:"Taken",onChange:this.handleChangeLeave9_2,defaultValue:this.state.leave9_2}),"   "),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave9_3",placeholder:"Remaining",onChange:this.handleChangeLeave9_3,defaultValue:this.state.leave9_3}),"   ")),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Balance",this.state.leave9_1,"required|integer")),l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Taken",this.state.leave9_2,"required|integer")),l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Remaining",this.state.leave9_3,"required|integer"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"leave10_1",sm:4},"Shared Parental Leave"),l.a.createElement(B.a,{sm:8}),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave10_1",placeholder:"Balance",onChange:this.handleChangeLeave10_1,defaultValue:this.state.leave10_1}),"   "),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave10_2",placeholder:"Taken",onChange:this.handleChangeLeave10_2,defaultValue:this.state.leave10_2}),"   "),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"leave10_3",placeholder:"Remaining",onChange:this.handleChangeLeave10_3,defaultValue:this.state.leave10_3}),"   ")),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Balance",this.state.leave10_1,"required|integer")),l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Taken",this.state.leave10_2,"required|integer")),l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Remaining",this.state.leave10_3,"required|integer"))),l.a.createElement(K.a,{type:"text",name:"id",value:this.state.editId,readOnly:!0,hidden:!0}),l.a.createElement(K.a,{type:"text",name:"updatedDate",value:N(this.state.updatedDate).format("LL"),readOnly:!0,hidden:!0}),l.a.createElement(K.a,{type:"text",name:"year",value:N(this.state.updatedDate).format("YYYY"),readOnly:!0,hidden:!0})),l.a.createElement(ee.a,null,l.a.createElement(K.a,{type:"submit",className:"btn btn-primary",value:"Save"})," ",l.a.createElement(R.a,{color:"secondary",onClick:this.leaveToggle},"Cancel"))):l.a.createElement("div",null,l.a.createElement(X.a,{toggle:this.toggle},"Leave Balance"),l.a.createElement(Z.a,null,l.a.createElement(V.a,{className:"leave_table_main",responsive:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Leave Type"),l.a.createElement("th",null,"Balance"),l.a.createElement("th",null,"Taken"),l.a.createElement("th",null,"Remaining"))),this.state.individualEmployeeLeaveDetails.map(function(e){return l.a.createElement("tbody",{key:e.leave_balance_id,id:e.leave_balance_id},l.a.createElement("tr",null,l.a.createElement("td",null,e.leave_type),l.a.createElement("td",null,e.leave_balance),l.a.createElement("td",null,e.leave_taken),l.a.createElement("td",null,e.leave_remaining)))}))),l.a.createElement(ee.a,null,l.a.createElement(R.a,{color:"secondary",onClick:this.leaveToggle},"Cancel")))),l.a.createElement(Q.a,{isOpen:this.state.modalEdit,toggle:this.toggle,className:this.props.className},l.a.createElement(H.a,{onSubmit:this.handleSubmitEditLeave},l.a.createElement(X.a,{toggle:this.toggle,charCode:"Y"},"Editing ",this.state.editName+"'s entitlements ID: "+this.state.editId),l.a.createElement(Z.a,null,l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement($.a,{for:"leaveType",sm:4}),l.a.createElement(B.a,{className:"warning_text",sm:8},this.validator.message("leaveType",this.state.leaveTypeValue,"required|between:1,7"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"leaveTypeSelect",sm:4},"Select leave type"),l.a.createElement(B.a,{sm:8},l.a.createElement("select",{value:this.state.leaveTypeValue,name:"leaveType",id:"leaveTypeSelect",onChange:this.handleChangeLeaveType},l.a.createElement("option",{value:"0"},"Select your leave"),l.a.createElement("option",{value:"1"},"Annual Leave"),l.a.createElement("option",{value:"2"},"Childcare Leave"),l.a.createElement("option",{value:"3"},"National Service"),l.a.createElement("option",{value:"4"},"Off in lieu"),l.a.createElement("option",{value:"5"},"Medical Leave"),l.a.createElement("option",{value:"6"},"Hospitalisation Leave"),l.a.createElement("option",{value:"8"},"Maternity Leave"),l.a.createElement("option",{value:"9"},"Parental Leave"),l.a.createElement("option",{value:"10"},"Shared Parental Leave"),l.a.createElement("option",{value:"7"},"Unpaid Leave")))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"editLeave1_1",sm:4},this.state.leaveType),l.a.createElement(B.a,{sm:8}),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"editLeave1_1",placeholder:"Balance",onChange:this.handleChangeEditLeave1_1,defaultValue:this.state.balance}),"   "),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"editLeave1_2",placeholder:"Taken",onChange:this.handleChangeEditLeave1_2,defaultValue:this.state.taken}),"   "),l.a.createElement(B.a,{sm:4},l.a.createElement(K.a,{type:"number",name:"editLeave1_3",placeholder:"Remaining",onChange:this.handleChangeEditLeave1_3,defaultValue:this.state.remaining}),"   ")),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Balance",this.state.balance,"required|integer")),l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Taken",this.state.taken,"required|integer")),l.a.createElement(B.a,{className:"warning_text",sm:4,style:{fontSize:"9px"}},this.validator.message("Remaining",this.state.remaining,"required|integer"))),l.a.createElement(K.a,{type:"text",name:"id",value:this.state.editId,readOnly:!0,hidden:!0}),l.a.createElement(K.a,{type:"text",name:"updatedDate",value:N(this.state.updatedDate).format("LL"),readOnly:!0,hidden:!0}),l.a.createElement(K.a,{type:"text",name:"year",value:N(this.state.updatedDate).format("YYYY"),readOnly:!0,hidden:!0}),l.a.createElement(K.a,{type:"text",name:"balanceID",value:this.state.balanceID,readOnly:!0,hidden:!0})),l.a.createElement(ee.a,null,l.a.createElement(K.a,{type:"submit",className:"btn btn-primary",value:"Save"})," ",l.a.createElement(R.a,{color:"secondary",onClick:this.editLeaveToggle},"Cancel")))))}}]),a}(n.Component),ie=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(c.a)(this,Object(d.a)(a).call(this,e))).handleChangeCheckAdmin=function(){t.setState({isAdminChecked:!t.state.isAdminChecked})},t.handleChangeCheckManagement=function(){t.setState({isManagementChecked:!t.state.isManagementChecked})},t.getLoginStatus=function(e){fetch("/api/get_account_valification_admin").then(function(e){e.ok&&window&&(window.location.href="/")}).catch(function(e){return console.error(e)})},t.state={activeTab:"1",isAdmin:!1,modal:!1,showError:0,isAdminChecked:!1,isManagementChecked:!1,dateHired:"",name:"",email:"",mobile:"",department:"",password:"",password2:""},t.validator=new F.a,t.tabToggle=t.tabToggle.bind(Object(v.a)(Object(v.a)(t))),t.handleSubmit=t.handleSubmit.bind(Object(v.a)(Object(v.a)(t))),t.handleChangeJoinDate=t.handleChangeJoinDate.bind(Object(v.a)(Object(v.a)(t))),t.handleChangeCheckAdmin=t.handleChangeCheckAdmin.bind(Object(v.a)(Object(v.a)(t))),t.handleChangeCheckManagement=t.handleChangeCheckManagement.bind(Object(v.a)(Object(v.a)(t))),t.handleChangeName=t.handleChangeName.bind(Object(v.a)(Object(v.a)(t))),t.handleChangeEmail=t.handleChangeEmail.bind(Object(v.a)(Object(v.a)(t))),t.handleChangeMobile=t.handleChangeMobile.bind(Object(v.a)(Object(v.a)(t))),t.handleChangePassword=t.handleChangePassword.bind(Object(v.a)(Object(v.a)(t))),t.handleChangePassword2=t.handleChangePassword2.bind(Object(v.a)(Object(v.a)(t))),t.handleChangeDepartment=t.handleChangeDepartment.bind(Object(v.a)(Object(v.a)(t))),t.applyToggle=t.applyToggle.bind(Object(v.a)(Object(v.a)(t))),t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){window.history.pushState(null,null,window.location.href),window.onpopstate=function(){window.history.go(1)},this.getLoginStatus()}},{key:"tabToggle",value:function(e){this.state.activeTab!==e&&this.setState({activeTab:e})}},{key:"handleChangeJoinDate",value:function(e){this.setState({dateHired:e.target.value})}},{key:"handleChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"handleChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"handleChangeMobile",value:function(e){this.setState({mobile:e.target.value})}},{key:"handleChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleChangePassword2",value:function(e){this.setState({password2:e.target.value})}},{key:"handleChangeDepartment",value:function(e){this.setState({department:e.target.value.toUpperCase()})}},{key:"applyToggle",value:function(){this.setState({showError:0,isAdminChecked:!1,isManagementChecked:!1,dateHired:"",name:"",email:"",mobile:"",department:"",password:"",password2:""}),this.setState(function(e){return{modal:!e.modal}}),this.validator.hideMessages()}},{key:"handleSubmit",value:function(e){if(this.setState({showError:1}),this.validator.allValid())if(this.state.password===this.state.password2){var a={name:this.state.name,email:this.state.email,mobile:this.state.mobile,department:this.state.department,password:this.state.password,password2:this.state.password2,dateHired:this.state.dateHired,isAdmin:this.state.isAdminChecked,isManagement:this.state.isManagementChecked};fetch("/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),alert("You submitted the form and stuff!")}else e.preventDefault(),alert("password doesn't match");else e.preventDefault(),this.validator.showMessages(),this.forceUpdate()}},{key:"render",value:function(){var e=this;return l.a.createElement(p.a,null,l.a.createElement(_.a,{tabs:!0},l.a.createElement(b.a,null,l.a.createElement(C.a,{active:"1"===this.state.activeTab,onClick:function(){e.tabToggle("1")}},"Employee Lists")),l.a.createElement(b.a,null,l.a.createElement(C.a,{active:"2"===this.state.activeTab,onClick:function(){e.tabToggle("2")}},"Leave Management"))),l.a.createElement(ne.a,{activeTab:this.state.activeTab},l.a.createElement(le.a,{tabId:"1"},l.a.createElement(Y.a,null,l.a.createElement(B.a,{sm:"12"},l.a.createElement("div",null,l.a.createElement(R.a,{style:{marginTop:"30px"},color:"primary",onClick:this.applyToggle},l.a.createElement(te.a,{style:{fontSize:"x-large"}})," Create New Employee"),l.a.createElement("h2",{className:"leave_table_h2",style:{marginTop:"30px"}},"Employee Lists"),l.a.createElement("h5",{style:{color:"rgb(115, 125, 117)"}},"**Click on Leave Management for more details. "),l.a.createElement(Q.a,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className},l.a.createElement(H.a,{onSubmit:this.handleSubmit},l.a.createElement(X.a,{toggle:this.toggle},"New Employee"),l.a.createElement(Z.a,null,l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement($.a,{for:"name",sm:4}),l.a.createElement(B.a,{className:"warning_text",sm:8},this.validator.message("name",this.state.name,"required|alpha"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"name",sm:4},"Name"),l.a.createElement(B.a,{sm:8},l.a.createElement(K.a,{type:"text",name:"name",placeholder:"Name",onChange:this.handleChangeName}))),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement($.a,{for:"email",sm:4}),l.a.createElement(B.a,{className:"warning_text",sm:8},this.validator.message("email",this.state.email,"required|email"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"email",sm:4},"Email"),l.a.createElement(B.a,{sm:8},l.a.createElement(K.a,{type:"email",name:"email",placeholder:"Email",onChange:this.handleChangeEmail}))),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement($.a,{for:"password",sm:4}),l.a.createElement(B.a,{className:"warning_text",sm:8},this.validator.message("password",this.state.password,"required|min:6"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"password",sm:4},"Passowrd"),l.a.createElement(B.a,{sm:8},l.a.createElement(K.a,{type:"password",name:"password",placeholder:"*********",onChange:this.handleChangePassword,autoComplete:"off"}))),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement($.a,{for:"password2",sm:4}),l.a.createElement(B.a,{className:"warning_text",sm:8},this.validator.message("password2",this.state.password2,"required|min:6"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"password2",sm:4},"Confirm Password"),l.a.createElement(B.a,{sm:8},l.a.createElement(K.a,{type:"password",name:"password2",placeholder:"Confirm Password",onChange:this.handleChangePassword2,autoComplete:"off"}))),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement($.a,{for:"mobile",sm:4}),l.a.createElement(B.a,{className:"warning_text",sm:8},this.validator.message("mobile",this.state.mobile,"required|phone"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"mobile",sm:4},"Mobile"),l.a.createElement(B.a,{sm:8},l.a.createElement(K.a,{type:"number",name:"mobile",placeholder:"Contact number",onChange:this.handleChangeMobile}))),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement($.a,{for:"department",sm:4}),l.a.createElement(B.a,{className:"warning_text",sm:8},this.validator.message("department",this.state.department,"required|alpha"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"department",sm:4},"Department"),l.a.createElement(B.a,{sm:8},l.a.createElement(K.a,{type:"text",name:"department",placeholder:"Department ..",onChange:this.handleChangeDepartment}))),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement($.a,{for:"dateHired",sm:4}),l.a.createElement(B.a,{className:"warning_text",sm:8},this.validator.message("dateHired",this.state.dateHired,"required"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"dateJoined",sm:4},"Date Joined"),l.a.createElement(B.a,{sm:8},l.a.createElement(K.a,{type:"date",name:"dateHired",id:"dateJoined",placeholder:"date placeholder",selected:this.state.dateHired,onChange:this.handleChangeJoinDate}))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"isAdmin",sm:4}),l.a.createElement(B.a,{sm:{size:8}},l.a.createElement(z.a,{check:!0},l.a.createElement($.a,{check:!0},l.a.createElement(K.a,{type:"checkbox",id:"isAdmin",checked:this.state.isAdminChecked,onChange:this.handleChangeCheckAdmin})," ","Is Admin?")))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"isManagement",sm:4}),l.a.createElement(B.a,{sm:{size:8}},l.a.createElement(z.a,{check:!0},l.a.createElement($.a,{check:!0},l.a.createElement(K.a,{type:"checkbox",id:"isManagement",checked:this.state.isManagementChecked,onChange:this.handleChangeCheckManagement})," ","Is Management?")))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{sm:4}),l.a.createElement(B.a,{sm:8},l.a.createElement("p",{style:{color:"red"}},this.state.msgWrongYear)))),l.a.createElement(ee.a,null,l.a.createElement(K.a,{type:"submit",className:"btn btn-primary",value:"Create"})," ",l.a.createElement(R.a,{color:"secondary",onClick:this.applyToggle},"Cancel"))))),l.a.createElement(se,null)))),l.a.createElement(le.a,{tabId:"2"},l.a.createElement(Y.a,null,l.a.createElement(B.a,{sm:"12"},l.a.createElement("h2",{className:"leave_table_h2",style:{marginTop:"30px"}},"Leave Management"),l.a.createElement("h5",{style:{color:"rgb(115, 125, 117)"}},"**Please add entitlements for each user. "),l.a.createElement(re,null))))))}}]),a}(n.Component),oe=function(e){function a(){var e;return Object(i.a)(this,a),(e=Object(c.a)(this,Object(d.a)(a).call(this))).getLeaves=function(a){fetch("http://localhost:3000/api/get_leaves/".concat(a)).then(function(e){return e.json()}).then(function(a){return e.setState({leaves:a.data})}).catch(function(e){return console.error("Get error"+e)})},e.getUserId=function(a){fetch("/api/check_user_id").then(function(e){return e.json()}).then(function(a){return e.setState({id:a.data},function(){e.getLeaves(e.state.id)})}).catch(function(e){return console.error(e)})},e.state={leaves:[],id:"".concat(0)},e}return Object(m.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getUserId()}},{key:"render",value:function(){return l.a.createElement(V.a,{className:"leave_table",responsive:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Leave Type"),l.a.createElement("th",null,"Year"),l.a.createElement("th",null,"Updated"),l.a.createElement("th",null,"Balance"),l.a.createElement("th",null,"Taken"),l.a.createElement("th",null,"Remaining"))),this.state.leaves.map(function(e){return l.a.createElement("tbody",{key:e.leave_balance_id,id:e.leave_balance_id},l.a.createElement("tr",null,l.a.createElement("td",null,e.leave_type),l.a.createElement("td",null,e.year_number),l.a.createElement("td",null,N(e.updated).format("DD MMM, YYYY")),l.a.createElement("td",null,e.leave_balance),l.a.createElement("td",null,e.leave_taken),l.a.createElement("td",null,e.leave_remaining)))}))}}]),a}(n.Component),ce=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(c.a)(this,Object(d.a)(a).call(this,e))).handleChangeCheckHalfDay=function(){t.setState({isHalfDayChecked:!t.state.isHalfDayChecked},function(){return t.getDaysCount()})},t.getBalance=function(e){t.state.leavesBalance.map(function(e){return t.setState({name:e.employee_name.split(" ").join(""),leaveType:e.leave_type,balanceID:e.leave_balance_id,balance:e.leave_balance,taken:e.leave_taken,remaining:e.leave_remaining},function(){})})},t.getDaysCount=function(e){t.setState({daysCount:0});var a=N(t.state.fromLeave),n=N(t.state.toLeave),l=n.diff(a),s=N.duration(l),r=s.days();s.years()>=1?t.setState({msgWrongYear:"*Please check the year you've selected."}):0===s.years()&&t.setState({msgWrongYear:""}),0===s.days()&&null!=n?t.state.isHalfDayChecked?t.setState({daysCount:.5}):t.setState({daysCount:1}):s.days()<=0?t.setState({msgWrongYear:"*Please check the date you've selected."}):s.months()>=1?t.setState({msgWrongYear:"*Please check the date you've selected."}):t.setState({daysCount:r+1})},t.getLeaves=function(e,a){fetch("http://localhost:3000/api/get_leaves_balance/".concat(e,"/").concat(a)).then(function(e){return e.json()}).then(function(e){return t.setState({leavesBalance:e.data},function(){t.getBalance()})}).catch(function(e){return console.error(e)})},t.getLoginStatus=function(e){fetch("/api/get_account_valification").then(function(e){e.ok&&window&&(window.location.href="/")}).catch(function(e){return console.error(e)})},t.getUserId=function(e){fetch("/api/check_user_id").then(function(e){return e.json()}).then(function(e){return t.setState({id:e.data},function(){console.log(t.state.id)})}).catch(function(e){return console.error(e)})},t.state={showError:0,modal:!1,isHalfDayChecked:!1,leaveTypeValue:0,currentDate:new Date,fromLeave:new Date,toLeave:"",msgWrongYear:"",daysCount:0,reason:"",leavesBalance:[],balanceID:0,balance:0,taken:0,remaining:0,id:0,name:"",leaveType:""},t.validator=new F.a,t.handleSubmit=t.handleSubmit.bind(Object(v.a)(Object(v.a)(t))),t.handleChangeStart=t.handleChangeStart.bind(Object(v.a)(Object(v.a)(t))),t.handleChangeEnd=t.handleChangeEnd.bind(Object(v.a)(Object(v.a)(t))),t.handleChangeCheckHalfDay=t.handleChangeCheckHalfDay.bind(Object(v.a)(Object(v.a)(t))),t.handleChangeDays=t.handleChangeDays.bind(Object(v.a)(Object(v.a)(t))),t.handleChangeLeaveType=t.handleChangeLeaveType.bind(Object(v.a)(Object(v.a)(t))),t.handleChangeReason=t.handleChangeReason.bind(Object(v.a)(Object(v.a)(t))),t.applyToggle=t.applyToggle.bind(Object(v.a)(Object(v.a)(t))),t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getDaysCount(),this.getLoginStatus(),this.getUserId()}},{key:"handleChangeStart",value:function(e){var a=this;this.setState({fromLeave:e.target.value},function(){return a.getDaysCount()})}},{key:"handleChangeEnd",value:function(e){var a=this;this.setState({toLeave:e.target.value},function(){return a.getDaysCount()})}},{key:"handleChangeDays",value:function(e){var a=N(this.state.fromLeave),t=N(this.state.toLeave).diff(a),n=N.duration(t).days();e.target.value>n+1||e.target.value<0?alert("Please calculate the day applied properly."):this.setState({daysCount:e.target.value})}},{key:"handleChangeReason",value:function(e){this.setState({reason:e.target.value})}},{key:"handleChangeLeaveType",value:function(e){var a=this;this.setState({leaveTypeValue:e.target.value},function(){return a.getLeaves(a.state.id,a.state.leaveTypeValue)})}},{key:"applyToggle",value:function(){this.setState({showError:0,daysCount:0,leaveTypeValue:0,remaining:0,taken:0,balanceID:0,reason:""}),this.setState(function(e){return{modal:!e.modal}})}},{key:"handleSubmit",value:function(e){var a=this;if(this.setState({showError:1}),this.validator.allValid()){var t=Number(this.state.taken),n=Number(this.state.remaining),l=Number(this.state.daysCount),s=this.state.leaveTypeValue,r=t+l,i=n-l;l>n&&"7"!==s&&"3"!==s?(e.preventDefault(),alert("Please make sure you have enough leave to take.")):"7"===s||"3"===s?(this.setState({taken:r,remaining:0,balance:0},function(){var e={name:a.state.name,leave:a.state.leaveType,balanceID:a.state.balanceID,leaveType:a.state.leaveTypeValue,fromDate:a.state.fromLeave,toDate:a.state.toLeave,fromDateMonth:N(a.state.fromLeave).format("MM YYYY"),toDateMonth:N(a.state.toLeave).format("MM YYYY"),reason:a.state.reason,days:a.state.daysCount,currentDate:a.state.currentDate,taken:a.state.taken,remaining:a.state.remaining,id:a.state.id};fetch("/apply-leave",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),fetch("/send-mail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}),alert("Apply Successful...")):(this.setState({taken:r,remaining:i},function(){var e={name:a.state.name,leave:a.state.leaveType,balanceID:a.state.balanceID,leaveType:a.state.leaveTypeValue,fromDate:a.state.fromLeave,toDate:a.state.toLeave,fromDateMonth:N(a.state.fromLeave).format("MM YYYY"),toDateMonth:N(a.state.toLeave).format("MM YYYY"),reason:a.state.reason,days:a.state.daysCount,currentDate:a.state.currentDate,taken:a.state.taken,remaining:a.state.remaining,id:a.state.id};fetch("/apply-leave",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),fetch("/send-mail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}),alert("Apply Successful..."))}else e.preventDefault(),this.validator.showMessages(),this.forceUpdate()}},{key:"render",value:function(){return l.a.createElement(p.a,null,l.a.createElement("div",null,l.a.createElement(R.a,{color:"primary",onClick:this.applyToggle},l.a.createElement(te.a,{style:{fontSize:"x-large"}})," New Leave Application"),l.a.createElement("br",null),l.a.createElement("h2",{className:"leave_table_h2 h2-align"},"Leave Balance"),l.a.createElement(Q.a,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className},l.a.createElement(H.a,{onSubmit:this.handleSubmit},l.a.createElement(X.a,{toggle:this.toggle,charCode:"Y"},"Apply for a leave"),l.a.createElement(Z.a,null,l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement($.a,{for:"leaveType",sm:4}),l.a.createElement(B.a,{className:"warning_text",sm:8},this.validator.message("leaveType",this.state.leaveTypeValue,"required|between:1,7"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"leaveTypeSelect",sm:4},"Select leave type"),l.a.createElement(B.a,{sm:8},l.a.createElement("select",{value:this.state.leaveTypeValue,name:"leaveType",id:"leaveTypeSelect",onChange:this.handleChangeLeaveType},l.a.createElement("option",{value:"0"},"Select your leave"),l.a.createElement("option",{value:"1"},"Annual Leave"),l.a.createElement("option",{value:"2"},"Childcare Leave"),l.a.createElement("option",{value:"3"},"National Service"),l.a.createElement("option",{value:"4"},"Off in lieu"),l.a.createElement("option",{value:"5"},"Medical Leave"),l.a.createElement("option",{value:"6"},"Hospitalisation Leave"),l.a.createElement("option",{value:"8"},"Maternity Leave"),l.a.createElement("option",{value:"9"},"Parental Leave"),l.a.createElement("option",{value:"10"},"Shared Parental Leave"),l.a.createElement("option",{value:"7"},"Unpaid Leave")))),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement($.a,{for:"fromDate",sm:4}),l.a.createElement(B.a,{className:"warning_text",sm:8},this.validator.message("fromDate",this.state.fromLeave,"required"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"leavefromDate",sm:4},"From date"),l.a.createElement(B.a,{sm:8},l.a.createElement(K.a,{type:"date",name:"fromDate",id:"leavefromDate",placeholder:"date placeholder",selected:this.state.fromLeave,onChange:this.handleChangeStart}))),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement($.a,{for:"toDate",sm:4}),l.a.createElement(B.a,{className:"warning_text",sm:8},this.validator.message("toDate",this.state.toLeave,"required"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"leavetoDate",sm:4},"To date"),l.a.createElement(B.a,{sm:8},l.a.createElement(K.a,{type:"date",name:"toDate",id:"leavetoDate",placeholder:"date placeholder",selected:this.state.toLeave,onChange:this.handleChangeEnd}))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"isHalfday",sm:4}),l.a.createElement(B.a,{sm:{size:8}},l.a.createElement(z.a,{check:!0},l.a.createElement($.a,{check:!0},l.a.createElement(K.a,{type:"checkbox",id:"isHalfday",checked:this.state.isHalfDayChecked,onChange:this.handleChangeCheckHalfDay,disabled:this.state.fromLeave!==this.state.toLeave})," ","Half day?")))),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement($.a,{for:"days",sm:4}),l.a.createElement(B.a,{className:"warning_text",sm:8},this.validator.message("days",this.state.daysCount,"required"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"daysApplied",sm:4},"Days Applied"),l.a.createElement(B.a,{sm:8},l.a.createElement(K.a,{type:"number",step:"any",name:"days",value:this.state.daysCount,onChange:this.handleChangeDays}))),l.a.createElement(z.a,{row:!0,hidden:1!==this.state.showError},l.a.createElement($.a,{for:"reason",sm:4}),l.a.createElement(B.a,{className:"warning_text",sm:8},this.validator.message("reason",this.state.reason,"required|max:65"))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{for:"reason",sm:4},"Reason"),l.a.createElement(B.a,{sm:8},l.a.createElement(K.a,{type:"textarea",name:"reason",placeholder:"Cannot be null",onChange:this.handleChangeReason}))),l.a.createElement(z.a,{row:!0},l.a.createElement($.a,{sm:4}),l.a.createElement(B.a,{sm:8},l.a.createElement("p",{style:{color:"red"}},this.state.msgWrongYear))),l.a.createElement(K.a,{type:"text",name:"name",value:this.state.name,readOnly:!0,hidden:!0}),l.a.createElement(K.a,{type:"text",name:"leave",value:this.state.leaveType,readOnly:!0,hidden:!0}),l.a.createElement(K.a,{type:"number",step:"any",name:"taken",value:this.state.taken,readOnly:!0,hidden:!0}),l.a.createElement(K.a,{type:"number",step:"any",name:"remaining",value:this.state.remaining,readOnly:!0,hidden:!0}),l.a.createElement(K.a,{type:"text",name:"currentDate",value:N(this.state.currentDate).format("LL"),readOnly:!0,hidden:!0}),l.a.createElement(K.a,{type:"text",name:"balanceID",value:this.state.balanceID,readOnly:!0,hidden:!0}),l.a.createElement(K.a,{type:"text",name:"id",value:this.state.id,readOnly:!0,hidden:!0}),l.a.createElement(K.a,{type:"text",name:"fromDateMonth",value:this.state.fromLeave,readOnly:!0,hidden:!0}),l.a.createElement(K.a,{type:"text",name:"toDateMonth",value:this.state.toLeave,readOnly:!0,hidden:!0})),l.a.createElement(ee.a,null,l.a.createElement(K.a,{type:"submit",className:"btn btn-primary",value:"Apply"})," ",l.a.createElement(R.a,{color:"secondary",onClick:this.applyToggle},"Cancel"))))),l.a.createElement(oe,null))}}]),a}(n.Component),de=function(e){function a(){var e;return Object(i.a)(this,a),(e=Object(c.a)(this,Object(d.a)(a).call(this))).getLoginStatus=function(e){fetch("/api/get_account_valification").then(function(e){e.ok&&window&&(window.location.href="/")}).catch(function(e){return console.error(e)})},e.getUserId=function(a){fetch("/api/check_user_id").then(function(e){return e.json()}).then(function(a){return e.setState({id:a.data},function(){e.getAllLeaves(e.state.id)})}).catch(function(e){return console.error(e)})},e.getAllLeaves=function(a){fetch("http://localhost:3000/api/get_leaves_taken/".concat(a)).then(function(e){return e.json()}).then(function(a){return e.setState({leaves:a.data})}).catch(function(e){return console.error(e)})},e.getLeaves=function(a){fetch("http://localhost:3000/api/get_leaves_taken_cancel/".concat(a)).then(function(e){return e.json()}).then(function(a){return e.setState({indLeaves:a.data},function(){e.getLeaveTakenHistory()})}).catch(function(e){return console.error(e)})},e.getLeavesBalance=function(a,t){fetch("http://localhost:3000/api/get_leaves_balance/".concat(a,"/").concat(t)).then(function(e){return e.json()}).then(function(a){return e.setState({leavesBalance:a.data},function(){e.getBalance()})}).catch(function(e){return console.error(e)})},e.getLeaveTakenHistory=function(a){e.state.indLeaves.map(function(a){return e.setState({employeeID:a.employee_id,leaveTypeCode:a.leave_type_code,daysCount:a.number_of_days,leaveApproval:a.leave_approval_code},function(){e.getLeavesBalance(e.state.employeeID,e.state.leaveTypeCode)})})},e.getBalance=function(a){e.state.leavesBalance.map(function(a){return e.setState({balanceID:a.leave_balance_id,taken:a.leave_taken,remaining:a.leave_remaining,employeeID:a.employee_id},function(){var a=Number(e.state.taken),t=Number(e.state.remaining),n=Number(e.state.daysCount),l=e.state.leaveTypeCode,s=a-n,r=t+n;7===l||3===l?e.setState({taken:s,remaining:0},function(){var a={employeeID:e.state.employeeID,balanceID:e.state.balanceID,leaveType:e.state.leaveTypeCode,days:e.state.daysCount,currentDate:e.state.currentDate,taken:e.state.taken,remaining:e.state.remaining};fetch("/api/update_leaves_taken/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})}):e.setState({taken:s,remaining:r},function(){var a={employeeID:e.state.employeeID,balanceID:e.state.balanceID,leaveType:e.state.leaveTypeCode,days:e.state.daysCount,currentDate:e.state.currentDate,taken:e.state.taken,remaining:e.state.remaining};fetch("/api/update_leaves_taken/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})})})})},e.state={leaves:[],indLeaves:[],leavesBalance:[],employeeID:0,leaveTypeCode:0,daysCount:0,leaveApproval:0,balanceID:0,currentDate:new Date,remaining:0,taken:0,id:0},e.cancelToggle=e.cancelToggle.bind(Object(v.a)(Object(v.a)(e))),e}return Object(m.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getLoginStatus(),this.getUserId()}},{key:"componentDidUpdate",value:function(){}},{key:"cancelToggle",value:function(){var e=Object(T.a)(D.a.mark(function e(a){var t;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a,e.next=3,this.getLeaves(t);case 3:return e.next=5,fetch("/api/delete_leaves_taken/".concat(a),{method:"DELETE"});case 5:return e.next=7,setTimeout(function(){return window.location.reload()},1500);case 7:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return l.a.createElement(p.a,null,l.a.createElement("h2",{className:"history_table_h2 h2-align"},"Leave History"),l.a.createElement(V.a,{className:"leave_table",responsive:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Leave Type"),l.a.createElement("th",null,"Dates"),l.a.createElement("th",null,"Day(s) Applied"),l.a.createElement("th",null,"Reason"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Actions"))),this.state.leaves.map(function(a){return l.a.createElement("tbody",{key:a.leave_period_id,id:a.leave_period_id},l.a.createElement("tr",null,l.a.createElement("td",null,a.leave_type),l.a.createElement("td",null,N(a.leave_from_date).format("DD MMM")," - ",N(a.leave_to_date).format("DD MMM, YYYY")),l.a.createElement("td",null,a.number_of_days+" day(s)"),l.a.createElement("td",null,a.reason),l.a.createElement("td",null,a.leave_status),l.a.createElement("td",null,l.a.createElement(R.a,{color:"link",style:{color:"red"},id:a.leave_period_id,onClick:function(){window.confirm("Are you sure you want to cancel your request?")&&e.cancelToggle(a.leave_period_id)},hidden:1!==a.leave_approval_code},l.a.createElement(G.b,null)))))})))}}]),a}(n.Component),me=(t(63),t(64),function(e){function a(){var e;return Object(i.a)(this,a),(e=Object(c.a)(this,Object(d.a)(a).call(this))).state={},e}return Object(m.a)(a,e),Object(o.a)(a,[{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return l.a.createElement(h.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(O,null),l.a.createElement(u.a,{exact:!0,path:"/",component:ae}),l.a.createElement(u.a,{path:"/MainDashboard",component:J}),l.a.createElement(u.a,{path:"/LeavePage",component:ce}),l.a.createElement(u.a,{path:"/HistoryPage",component:de}),l.a.createElement(u.a,{path:"/Admin",component:ie})))}}]),a}(n.Component));r.a.render(l.a.createElement(me,null),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.da63843b.chunk.js.map